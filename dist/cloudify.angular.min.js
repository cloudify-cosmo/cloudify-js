!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.returnExports=d()}(this,function(){function a(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var h=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=h,e.verbose&&(a.log=d()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],j=0;j<i.length;j++)if(e[i[j]])throw new Error("options."+i[j]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||a.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body)));var k=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};if(e.qs){var l="string"==typeof e.qs?e.qs:k(e.qs);e.uri=-1!==e.uri.indexOf("?")?e.uri+"&"+l:e.uri+"?"+l}var m=function(a){var b={};b.boundry="-------------------------------"+Math.floor(1e9*Math.random());var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push("--"+b.boundry+'\nContent-Disposition: form-data; name="'+d+'"\n\n'+a[d]+"\n");return c.push("--"+b.boundry+"--"),b.body=c.join(""),b.length=b.body.length,b.type="multipart/form-data; boundary="+b.boundry,b};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var n=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(e.headers["content-type"]=n,n){case"application/x-www-form-urlencoded":e.body=k(e.form).replace(/%20/g,"+");break;case"multipart/form-data":var o=m(e.form);e.body=o.body,e.headers["content-type"]=o.type;break;default:throw new Error("unsupported encoding:"+n)}}}return e.onResponse=e.onResponse||c,e.onResponse===!0&&(e.onResponse=f,e.callback=c),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+g(e.auth.username+":"+e.auth.password)),b(e)}function b(b){function c(){l=!0;var c=new Error("ETIMEDOUT");return c.code="ETIMEDOUT",c.duration=b.timeout,a.log.error("Timeout",{id:k._id,milliseconds:b.timeout}),b.callback(c,k)}function d(){if(l)return a.log.debug("Ignoring timed out state change",{state:k.readyState,id:k.id});if(a.log.debug("State change",{state:k.readyState,id:k.id,timed_out:l}),k.readyState===h.OPENED){a.log.debug("Request started",{id:k.id});for(var c in b.headers)k.setRequestHeader(c,b.headers[c])}else k.readyState===h.HEADERS_RECEIVED?e():k.readyState===h.LOADING?(e(),g()):k.readyState===h.DONE&&(e(),g(),i())}function e(){if(!p.response){if(p.response=!0,a.log.debug("Got response",{id:k.id,status:k.status}),clearTimeout(k.timeoutTimer),k.statusCode=k.status,m&&0==k.statusCode){var c=new Error("CORS request rejected: "+b.uri);return c.cors="rejected",p.loading=!0,p.end=!0,b.callback(c,k)}b.onResponse(null,k)}}function g(){p.loading||(p.loading=!0,a.log.debug("Response body loading",{id:k.id}))}function i(){if(!p.end){if(p.end=!0,a.log.debug("Request done",{id:k.id}),k.body=k.responseText,b.json)try{k.body=JSON.parse(k.responseText)}catch(c){return b.callback(c,k)}b.callback(null,k,k.body)}}var k=new h,l=!1,m=f(b.uri),n="withCredentials"in k;if(j+=1,k.seq_id=j,k.id=j+": "+b.method+" "+b.uri,k._id=k.id,m&&!n){var o=new Error("Browser does not support cross-origin request: "+b.uri);return o.cors="unsupported",b.callback(o,k)}k.timeoutTimer=setTimeout(c,b.timeout);var p={response:!1,loading:!1,end:!1};return k.onreadystatechange=d,k.open(b.method,b.uri,!0),m&&(k.withCredentials=!!b.withCredentials),k.send(b.body),k}function c(){}function d(){var a,b,d={},f=["trace","debug","info","warn","error"];for(b=0;b<f.length;b++)a=f[b],d[a]=c,"undefined"!=typeof console&&console&&console[a]&&(d[a]=e(console,a));return d}function e(a,b){function c(c,d){return"object"==typeof d&&(c+=" "+JSON.stringify(d)),a[b].call(a,c)}return c}function f(a){var b,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{b=location.href}catch(d){b=document.createElement("a"),b.href="",b=b.href}var e=c.exec(b.toLowerCase())||[],f=c.exec(a.toLowerCase()),g=!(!f||f[1]==e[1]&&f[2]==e[2]&&(f[3]||("http:"===f[1]?80:443))==(e[3]||("http:"===e[1]?80:443)));return g}function g(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");a.log={trace:c,debug:c,info:c,warn:c,error:c};var i=18e4,j=0;a.withCredentials=!1,a.DEFAULT_TIMEOUT=i,a.defaults=function(b){var c=function(a){var c=function(c,d){c="string"==typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in b)void 0===c[e]&&(c[e]=b[e]);return a(c,d)};return c},d=c(a);return d.get=c(a.get),d.post=c(a.post),d.put=c(a.put),d.head=c(a.head),d};var k=["get","put","post","head"];return k.forEach(function(b){var c=b.toUpperCase(),d=b.toLowerCase();a[d]=function(b){"string"==typeof b?b={method:c,uri:b}:(b=JSON.parse(JSON.stringify(b)),b.method=c);var d=[b].concat(Array.prototype.slice.apply(arguments,[1]));return a.apply(this,d)}}),a.couch=function(b,d){function e(a,b,c){if(a)return d(a,b,c);if((b.statusCode<200||b.statusCode>299)&&c.error){a=new Error("CouchDB error: "+(c.error.reason||c.error.error));for(var e in c)a[e]=c[e];return d(a,b,c)}return d(a,b,c)}"string"==typeof b&&(b={uri:b}),b.json=!0,b.body&&(b.json=b.body),delete b.body,d=d||c;var f=a(b,e);return f},a})},{}],2:[function(){},{}],3:[function(a,b,c){arguments[4][2][0].apply(c,arguments)},{dup:2}],4:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],5:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],6:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:7}],7:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],8:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],9:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":8,_process:7,inherits:5}],10:[function(a,b,c){"use strict";function d(a){return a=a||f.colouredLayout,function(b){g(a(b))}}function e(a){var b;return a.layout&&(b=f.layout(a.layout.type,a.layout)),d(b)}var f=a("../layouts"),g=console.log.bind(console);c.appender=d,c.configure=e},{"../layouts":13}],11:[function(a,b,c){"use strict";function d(a,b){b="object"==typeof b?b||{}:b?{format:b}:{};var c=a,d=g.toLevel(b.level,g.INFO),i=b.format||h,j=b.nolog?f(b.nolog):null;return function(a,f,h){if(a._logging)return h();if(j&&j.test(a.originalUrl))return h();if(c.isLevelEnabled(d)||"auto"===b.level){{var k,l=new Date,m=f.writeHead;a.originalUrl}a._logging=!0,f.writeHead=function(a,c){f.writeHead=m,f.writeHead(a,c),f.__statusCode=k=a,f.__headers=c||{},"auto"===b.level?(d=g.INFO,a>=300&&(d=g.WARN),a>=400&&(d=g.ERROR)):d=g.toLevel(b.level,g.INFO)},f.on("finish",function(){if(f.responseTime=new Date-l,f.statusCode&&"auto"===b.level&&(d=g.INFO,f.statusCode>=300&&(d=g.WARN),f.statusCode>=400&&(d=g.ERROR)),c.isLevelEnabled(d))if("function"==typeof i){var h=i(a,f,function(b){return e(b,a,f)});h&&c.log(d,h)}else c.log(d,e(i,a,f))})}h()}}function e(a,b,c){return a.replace(":url",b.originalUrl).replace(":method",b.method).replace(":status",c.__statusCode||c.statusCode).replace(":response-time",c.responseTime).replace(":date",(new Date).toUTCString()).replace(":referrer",b.headers.referer||b.headers.referrer||"").replace(":http-version",b.httpVersionMajor+"."+b.httpVersionMinor).replace(":remote-addr",b.ip||b._remoteAddress||b.socket&&(b.socket.remoteAddress||b.socket.socket&&b.socket.socket.remoteAddress)).replace(":user-agent",b.headers["user-agent"]||"").replace(":content-length",c._headers&&c._headers["content-length"]||c.__headers&&c.__headers["Content-Length"]||"-").replace(/:req\[([^\]]+)\]/g,function(a,c){return b.headers[c.toLowerCase()]}).replace(/:res\[([^\]]+)\]/g,function(a,b){return c._headers?c._headers[b.toLowerCase()]||c.__headers[b]:c.__headers&&c.__headers[b]})}function f(a){var b=null;if(a&&(a instanceof RegExp&&(b=a),"string"==typeof a&&(b=new RegExp(a)),Array.isArray(a))){var c=a.map(function(a){return a.source?a.source:a});b=new RegExp(c.join("|"))}return b}var g=a("./levels"),h=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';c.connectLogger=d},{"./levels":14}],12:[function(a,b,c){"use strict";function d(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function e(a){return d(a,2)}function f(a){var b=Math.abs(a.getTimezoneOffset()),c=String(Math.floor(b/60)),d=String(b%60);return 1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),a.getTimezoneOffset()<0?"+"+c+d:"-"+c+d}c.ISO8601_FORMAT="yyyy-MM-dd hh:mm:ss.SSS",c.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ssO",c.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",c.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS",c.asString=function(a){var b=c.ISO8601_FORMAT;"string"==typeof a&&(b=arguments[0],a=arguments[1]);var g=e(a.getDate()),h=e(a.getMonth()+1),i=e(a.getFullYear()),j=e(a.getFullYear().toString().substring(2,4)),k=b.indexOf("yyyy")>-1?i:j,l=e(a.getHours()),m=e(a.getMinutes()),n=e(a.getSeconds()),o=d(a.getMilliseconds(),3),p=f(a),q=b.replace(/dd/g,g).replace(/MM/g,h).replace(/y{1,4}/g,k).replace(/hh/g,l).replace(/mm/g,m).replace(/ss/g,n).replace(/SSS/g,o).replace(/O/g,p);return q}},{}],13:[function(a,b){(function(c){"use strict";function d(a){return a.map(function(a){return a instanceof Error&&a.stack?{inspect:function(){return q.format(a)+"\n"+a.stack}}:a})}function e(a){var b=Array.isArray(a)?a:Array.prototype.slice.call(arguments);return q.format.apply(q,d(b))}function f(a){return a?"["+t[a][0]+"m":""}function g(a){return a?"["+t[a][1]+"m":""}function h(a,b){return f(b)+a+g(b)}function i(a,b){var c=h(e("[%s] [%s] %s - ",n.asString(a.startTime),a.level,a.categoryName),b);return c}function j(a){return i(a)+e(a.data)}function k(a){return i(a,s[a.level.toString()])+e(a.data)}function l(a){return e(a.data)}function m(a,b){function d(a,b){var c=a.categoryName;if(b){var d=parseInt(b,10),e=c.split(".");d<e.length&&(c=e.slice(e.length-d).join("."))}return c}function h(a,b){var c=n.ISO8601_FORMAT;return b&&(c=b,"ISO8601"==c?c=n.ISO8601_FORMAT:"ISO8601_WITH_TZ_OFFSET"==c?c=n.ISO8601_WITH_TZ_OFFSET_FORMAT:"ABSOLUTE"==c?c=n.ABSOLUTETIME_FORMAT:"DATE"==c&&(c=n.DATETIME_FORMAT)),n.asString(c,a.startTime)}function i(){return o.hostname().toString()}function j(a){return e(a.data)}function k(){return p}function l(a){return a.level.toString()}function m(a){return""+a.startTime.toLocaleTimeString()}function q(a){return f(s[a.level.toString()])}function r(a){return g(s[a.level.toString()])}function t(){return"%"}function u(a){return a&&a.pid?a.pid:c.pid}function v(a,b){return a.cluster&&b?b.replace("%m",a.cluster.master).replace("%w",a.cluster.worker).replace("%i",a.cluster.workerId):a.cluster?a.cluster.worker+"@"+a.cluster.master:u()}function w(a,c){return"undefined"!=typeof b[c]?"function"==typeof b[c]?b[c](a):b[c]:null}function x(a,b,c){return C[a](b,c)}function y(a,b){var c;return a?(c=parseInt(a.substr(1),10),b.substring(0,c)):b}function z(a,b){var c;if(a)if("-"==a.charAt(0))for(c=parseInt(a.substr(1),10);b.length<c;)b+=" ";else for(c=parseInt(a,10);b.length<c;)b=" "+b;return b}var A="%r %p %c - %m%n",B=/%(-?[0-9]+)?(\.?[0-9]+)?([\[\]cdhmnprzxy%])(\{([^\}]+)\})?|([^%]+)/;a=a||A;var C={c:d,d:h,h:i,m:j,n:k,p:l,r:m,"[":q,"]":r,y:v,z:u,"%":t,x:w};return function(b){for(var c,d="",e=a;c=B.exec(e);){var f=(c[0],c[1]),g=c[2],h=c[3],i=c[5],j=c[6];if(j)d+=""+j;else{var k=x(h,b,i);k=y(g,k),k=z(f,k),d+=k}e=e.substr(c.index+c[0].length)}return d}}var n=a("./date_format"),o=a("os"),p=o.EOL||"\n",q=a("util"),r={messagePassThrough:function(){return l},basic:function(){return j},colored:function(){return k},coloured:function(){return k},pattern:function(a){return m(a&&a.pattern,a&&a.tokens)}},s={ALL:"grey",TRACE:"blue",DEBUG:"cyan",INFO:"green",WARN:"yellow",ERROR:"red",FATAL:"magenta",OFF:"grey"},t={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};b.exports={basicLayout:j,messagePassThroughLayout:l,patternLayout:m,colouredLayout:k,coloredLayout:k,layout:function(a,b){return r[a]&&r[a](b)}}}).call(this,a("_process"))},{"./date_format":12,_process:7,os:3,util:9}],14:[function(a,b){"use strict";function c(a,b){this.level=a,this.levelStr=b}function d(a,c){if(!a)return c;if("string"==typeof a){var e=a.toUpperCase();return b.exports[e]?b.exports[e]:c}return d(a.toString())}c.prototype.toString=function(){return this.levelStr},c.prototype.isLessThanOrEqualTo=function(a){return"string"==typeof a&&(a=d(a)),this.level<=a.level},c.prototype.isGreaterThanOrEqualTo=function(a){return"string"==typeof a&&(a=d(a)),this.level>=a.level},c.prototype.isEqualTo=function(a){return"string"==typeof a&&(a=d(a)),this.level===a.level},b.exports={ALL:new c(Number.MIN_VALUE,"ALL"),TRACE:new c(5e3,"TRACE"),DEBUG:new c(1e4,"DEBUG"),INFO:new c(2e4,"INFO"),WARN:new c(3e4,"WARN"),ERROR:new c(4e4,"ERROR"),FATAL:new c(5e4,"FATAL"),MARK:new c(9007199254740992,"MARK"),OFF:new c(Number.MAX_VALUE,"OFF"),toLevel:d}},{}],15:[function(a,b){(function(c){"use strict";function d(a){return L.hasOwnProperty(a)}function e(a){var b=i(a),c={};return c.temp=[],c.target=b,c.flush=function(){for(var a=0;a<c.temp.length;a++){var b=c.temp[a];c.target[b.level](b.message),delete c.temp[a]}},c.trace=function(a){c.temp.push({level:"trace",message:a})},c.debug=function(a){c.temp.push({level:"debug",message:a})},c.info=function(a){c.temp.push({level:"info",message:a})},c.warn=function(a){c.temp.push({level:"warn",message:a})},c.error=function(a){c.temp.push({level:"error",message:a})},c.fatal=function(a){c.temp.push({level:"fatal",message:a})},c}function f(a){return a+"."}function g(a,b){var c=f(a),d=f(b);return d.substring(0,c.length)==c}function h(a,b){var c=f(a),d=f(b);return d.substring(0,c.length)==c}function i(a){if("string"!=typeof a&&(a=I.DEFAULT_CATEGORY),!d(a)){var b=void 0;if(G.config)for(var c=Object.keys(G.config).sort(),e=0;e<c.length;e++){var f=c[e];g(f,a)&&(b=G.config[f])}L[a]=new I(a,b);var i;for(var j in K)h(j,a)&&(i=K[j],i.forEach(function(b){L[a].addListener("log",b)}));K[J]&&(i=K[J],i.forEach(function(b){L[a].addListener("log",b)}))}return L[a]}function j(){var a=Array.prototype.slice.call(arguments),b=a.shift();(0===a.length||void 0===a[0])&&(a=[J]),Array.isArray(a[0])&&(a=a[0]),a.forEach(function(a){if(l(b,a),a===J)k(b);else for(var c in L)h(a,c)&&L[c].addListener("log",b)})}function k(a){for(var b in L)d(b)&&L[b].addListener("log",a)}function l(a,b){K[b]||(K[b]=[]),K[b].push(a)}function m(){K={};for(var a in L)d(a)&&L[a].removeAllListeners("log")}function n(a,b){m(),a&&a.forEach(function(a){A(a.type);var c;a.makers=M;try{c=M[a.type](a,b),j(c,a.category)}catch(d){throw new Error("log4js configuration problem for "+E.inspect(a),d)}})}function o(a){if(G.config=a,a){var b=Object.keys(G.config).sort();for(var c in b){var d=b[c];d===J&&p(a[d]);for(var e in L)g(d,e)&&L[e].setLevel(a[d])}}}function p(a){I.prototype.level=G.toLevel(a,G.TRACE)}function q(){return i(I.DEFAULT_CATEGORY)}function r(a){return a?JSON.parse(D.readFileSync(a,"utf8")):void 0}function s(a,b){if(a)try{o(a.levels),n(a.appenders,b),a.replaceConsole?x():y()}catch(c){throw new Error("Problem reading log4js config "+E.inspect(a)+'. Error was "'+c.message+'" ('+c.stack+")")}}function t(a){var b=u(P.filename);b&&(P.lastMTime&&b.getTime()>P.lastMTime.getTime()&&s(r(P.filename),a),P.lastMTime=b)}function u(a){var b;try{b=D.statSync(P.filename).mtime}catch(c){i("log4js").warn("Failed to load configuration file "+a)}return b}function v(a,b){P.timerId&&(clearInterval(P.timerId),delete P.timerId),P.filename=a,P.lastMTime=u(a),P.timerId=setInterval(t,1e3*b.reloadSecs,b)}function w(a,b){var d=a;d=d||c.env.LOG4JS_CONFIG,b=b||{},void 0===d||null===d||"string"==typeof d?(b.reloadSecs&&v(d,b),d=r(d)||O):b.reloadSecs&&i("log4js").warn('Ignoring configuration reload parameter for "object" configuration.'),s(d,b)}function x(a){function b(b){return function(){b.apply(a,arguments)}}a=a||i("console"),["log","debug","info","warn","error"].forEach(function(c){console[c]=b("log"===c?a.info:a[c])})}function y(){["log","debug","info","warn","error"].forEach(function(a){console[a]=Q[a]})}function z(b){var c;try{c=a("./appenders/"+b)}catch(d){c=a(b)}return c}function A(a,c){if(c=c||z(a),!c)throw new Error("Invalid log4js appender: "+E.inspect(a));b.exports.appenders[a]=c.appender.bind(c),c.shutdown&&(N[a]=c.shutdown.bind(c)),M[a]=c.configure.bind(c)}function B(a){H.disableAllLogWrites();var b=Object.keys(N).reduce(function(a,b){return a.concat(N[b])},[]);C.each(b,function(a,b){a(b)},a)}var C=(a("events"),a("async")),D=a("fs"),E=(a("path"),a("util")),F=a("./layouts"),G=a("./levels"),H=a("./logger"),I=(H.LoggingEvent,H.Logger),J="[all]",K={},L={},M={},N={},O={appenders:[{type:"console"}],replaceConsole:!1};a("./appenders/console");var P={},Q={log:console.log,debug:console.debug,info:console.info,warn:console.warn,error:console.error};b.exports={getBufferedLogger:e,getLogger:i,getDefaultLogger:q,hasLogger:d,addAppender:j,loadAppender:A,clearAppenders:m,configure:w,shutdown:B,replaceConsole:x,restoreConsole:y,levels:G,setGlobalLogLevel:p,layouts:F,appenders:{},appenderMakers:M,connectLogger:a("./connect-logger").connectLogger},w()}).call(this,a("_process"))},{"./appenders/console":10,"./connect-logger":11,"./layouts":13,"./levels":14,"./logger":16,_process:7,async:17,events:4,fs:2,path:6,util:9}],16:[function(a,b,c){"use strict";function d(a,b,c,d){this.startTime=new Date,this.categoryName=a,this.data=c,this.level=b,this.logger=d}function e(a,b){this.category=a||k,b&&this.setLevel(b)}function f(){l=!1}function g(){l=!0}var h=a("./levels"),i=a("util"),j=a("events"),k="[default]",l=!0;i.inherits(e,j.EventEmitter),e.DEFAULT_CATEGORY=k,e.prototype.level=h.TRACE,e.prototype.setLevel=function(a){this.level=h.toLevel(a,this.level||h.TRACE)},e.prototype.removeLevel=function(){delete this.level},e.prototype.log=function(){var a,b=Array.prototype.slice.call(arguments),c=h.toLevel(b.shift());this.isLevelEnabled(c)&&(a=new d(this.category,c,b,this),this.emit("log",a))},e.prototype.isLevelEnabled=function(a){return this.level.isLessThanOrEqualTo(a)},["Trace","Debug","Info","Warn","Error","Fatal","Mark"].forEach(function(a){var b=h.toLevel(a);e.prototype["is"+a+"Enabled"]=function(){return this.isLevelEnabled(b)
},e.prototype[a.toLowerCase()]=function(){if(l&&this.isLevelEnabled(b)){var a=Array.prototype.slice.call(arguments);a.unshift(b),e.prototype.log.apply(this,a)}}}),c.LoggingEvent=d,c.Logger=e,c.disableAllLogWrites=f,c.enableAllLogWrites=g},{"./levels":14,events:4,util:9}],17:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var e=Array.prototype.slice.call(arguments,1);if(e.length<=1&&(e=e[0]),a){var h={};g(j(d),function(a){h[a]=d[a]}),h[c]=e,b(a,h),b=function(){}}else d[c]=e,f.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],o=function(){return i(n,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(o())e[e.length-1](m,d);else{var p=function(){o()&&(k(p),e[e.length-1](m,d))};h(p)}})},f.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){return d?c(d):void(b()?f.doWhilst(a,b,c):c())})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){return d?c(d):void(b()?c():f.doUntil(a,b,c))})},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},f=c(d);a(b.data,f)}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};var w=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=l(w),f.applyEachSeries=n(w),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("_process"))},{_process:7}],18:[function(a){"use strict";var b=a("./lib/client"),c=a("browser-request"),d=a("log4js");d.configure({appenders:[{type:"console",layout:{type:"pattern",pattern:"[ %d ] [ %c ] :: %m"}}]});var e=d.getLogger("cloudify.angular");angular.module("cloudifyjs",[]),angular.module("cloudifyjs").factory("CloudifyClient",function(){return function(a){return a.request||(a.request=c),new b(a)}}),e.trace("cloudifyjs is ready for use.")},{"./lib/client":20,"browser-request":1,log4js:15}],19:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.blueprints");c.prototype.list=function(a,b){d.trace("listing blueprints");var c={};return a&&(c._include=a),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/blueprints",qs:c},b)},c.prototype.get=function(a,b,c){d.trace("getting blueprint by id");var e={};return b&&(e._include=b),this.config.request({method:"GET",json:!0,url:String.format(this.config.endpoint+"/blueprints/{0}",a),qs:e},c)},c.prototype["delete"]=function(a,b,c){return d.trace("deleting blueprint"),this.config.request({method:"DELETE",json:!0,url:String.format(this.config.endpoint+"/blueprints/{0}",a)},c)},c.prototype.upload=function(){throw d.trace("uploading blueprint"),new Error("this function is not implemented")},c.prototype.download=function(){throw d.trace("downloading blueprint"),new Error("this function is not implemented")},c.prototype.browse=function(){throw d.trace("browse blueprint"),new Error("this function is not implemented")},c.prototype.browseFile=function(){throw d.trace("browse blueprint"),new Error("this function is not implemented")},b.exports=c},{log4js:15}],20:[function(a,b){"use strict";function c(a){var b=a.request;a.request=function(c,d){c.auth=a.cloudifyAuth,b(c,d)},this.blueprints=new d(a),this.events=new e(a),this.deployments=new f(a),this.executions=new g(a),this.manager=new h(a),this.nodeInstances=new i(a),this.nodes=new j(a),this.search=new k(a),this.evaluate=new l(a)}var d=a("./blueprints"),e=a("./events"),f=a("./deployments"),g=a("./executions"),h=a("./manager"),i=a("./nodeInstances"),j=a("./nodes"),k=a("./search"),l=a("./evaluate");b.exports=c,String.format=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=new RegExp("\\{"+(b-1)+"\\}","gm");a=a.replace(c,arguments[b])}return a}},{"./blueprints":19,"./deployments":21,"./evaluate":22,"./events":23,"./executions":24,"./manager":25,"./nodeInstances":26,"./nodes":27,"./search":28}],21:[function(a,b){"use strict";function c(a){this.config=a}function d(a){this.config=a}function e(a){this.config=a}var f=a("log4js").getLogger("cloudify.deployments");c.prototype.get=function(a,b){return f.trace("getting deployment outputs"),a?void this.config.request({method:"GET",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}/outputs",a)},b):void b(new Error("deployment_id is missing"))},d.prototype.start=function(a,b,c){return f.trace("starting deployment modification"),a?void this.config.request({method:"PATCH",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}/modify",a),body:{stage:"start",nodes:b}},c):void c(new Error("deployment_id is missing"))},d.prototype.finish=function(a,b,c){return f.trace("finishing deployment modification"),a?void this.config.request({method:"PATCH",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}/modify",a),body:{stage:"finish",modification:b}},c):void c(new Error("deployment_id is missing"))},e.prototype.list=function(a,b){f.trace("lising deployments");var c={};a&&(c._include=a),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/deployments",qs:c},b)},e.prototype.get=function(a,b,c){return f.trace("getting deployment"),a?void this.config.request({method:"GET",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}",a)},c):void c(new Error("blueprint_id is missing"))},e.prototype.create=function(a,b,c,d){if(f.trace("creating deployment"),!a)return void d(new Error("blueprint_id is missing"));if(!b)return void d(new Error("deployment_id is missing"));var e={blueprint_id:a};c&&(e.inputs=c),this.config.request({method:"PUT",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}",b),body:e},d)},e.prototype["delete"]=function(a,b,c){if(f.trace("deleting deployment"),!a)return void c(new Error("deployment_id is missing"));var d={};b===!0&&(d.ignore_live_nodes="true"),this.config.request({method:"DELETE",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}",a),qs:d},c)},e.prototype.get_workflows=function(a,b,c){return f.trace("getting workflows"),a?void this.config.request({method:"GET",json:!0,url:String.format(this.config.endpoint+"/deployments/{0}/workflows",a)},c):void c(new Error("blueprint_id is missing"))},b.exports=e},{log4js:15}],22:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.nodeInstances");c.prototype.functions=function(a,b,c,e){d.trace("evaluating"),this.config.request({method:"POST",url:this.config.endpoint+"/evaluate/functions",json:!0,body:{deployment_id:a,context:b,payload:c}},e)},b.exports=c},{log4js:15}],23:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.events");c._create_events_query=function(a,b){var c={bool:{must:[{match:{"context.execution_id":a}}]}},d={match:{type:"cloudify_event"}},e=null;return b?(e={match:{type:"cloudify_log"}},c.bool.should=[d,e]):c.bool.must.push(d),c},c.prototype.get=function(a,b,e,f,g){d.trace("getting events");var h={sort:[{"@timestamp":{order:"asc"}}],query:c._create_events_query(a,f)};h.from=isNaN(parseInt(b,10))?0:b,h.size=isNaN(parseInt(e),10)?100:e,this.query(h,g)},c.prototype.query=function(a,b){d.trace("getting events"),this.config.request({method:"POST",url:this.config.endpoint+"/events",json:!0,body:a},function(a,c){c&&c.body&&(c.body={total_events:c.body.hits.total,events:c.body.hits.hits}),b(a,c,c.body)})},b.exports=c},{log4js:15}],24:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.executions");c.prototype.list=function(a,b,c){d.trace("listing executions");var e={};a&&(e.deployment_id=a),b&&(e._include=b),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/executions",qs:e},c)},c.prototype.get=function(a,b,c){if(d.trace("getting execution"),!a)return void c(new Error("execution_id is missing"));var e={};b&&(e._include=b),this.config.request({method:"GET",json:!0,url:String.format(this.config.endpoint+"/executions/{0}",a),qs:e},c)},c.prototype.update=function(a,b,c,e){if(d.trace("updating execution"),!a)return void e(new Error("execution_id is missing"));var f={status:b};c||(f.error=c),this.config.request({method:"PATCH",url:String.format(this.config.endpoint+"/executions/{0}",a),json:!0,body:f},e)},c.prototype.start=function(a,b,c,e,f,g){if(d.trace("starting execution"),!a)return void g(new Error("deployment_id is missing"));if(!b)return void g(new Error("workflow_id is missing"));var h={deployment_id:a,workflow_id:b};c&&(h.parameters=c),h.allow_custom_parameters=e===!0?"true":"false",h.force=f===!0?"true":"false",this.config.request({method:"POST",url:this.config.endpoint+"/executions",body:h,json:!0},g)},c.prototype.cancel=function(a,b,c){if(d.trace("cancelling execution"),!a)return void c(new Error("execution_id is missing"));var e={};e.action=b===!0?"force-cancel":"cancel",this.config.request({method:"POST",url:String.format(this.config.endpoint+"/executions/{0}",a),json:!0,body:e},c)},b.exports=c},{log4js:15}],25:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.manager");c.prototype.get_status=function(a){d.trace("getting status"),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/status"},a)},c.prototype.get_version=function(a){d.trace("getting version"),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/version"},a)},c.prototype.get_context=function(a,b){d.trace("getting context");var c={};a&&(c._include=a),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/provider/context",qs:c},b)},c.prototype.create_context=function(a,b,c){if(d.trace("creating context"),!a)return void c(new Error("name is missing"));if(!b)return void c(new Error("context is missing"));var e={name:a,context:b};this.config.request({method:"POST",json:!0,url:this.config.endpoint+"/provider/context",body:e},c)},b.exports=c},{log4js:15}],26:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.nodeInstances");c.prototype.get=function(a,b,c){if(d.trace("getting node instances"),!a)return void c(new Error("node_instance_id is missing"));var e={};b&&(e._include=b),this.config.request({method:"GET",json:!0,url:String.format(this.config.endpoint+"/node-instances/{0}",a),qs:e},c)},c.prototype.update=function(a,b,c,e,f){d.trace("updating node instance"),a||f(new Error("node_instance_id is missing")),isNaN(parseInt(e))&&(e=0);var g={version:e};c&&(g.runtime_properties=c),b&&(g.state=b),this.config.request({method:"PATCH",url:String.format(this.config.endpoint+"/node-instances/{0}",a),json:!0,body:g},f)},c.prototype.list=function(a,b,c){d.trace("listing node instances");var e={};a&&(e.deployment_id=a),b&&(e._include=b),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/node-instances",qs:e},c)},b.exports=c},{log4js:15}],27:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.nodeInstances");c.prototype.list=function(a,b,c,e){d.trace("listing nodes");var f={};a&&(f.deployment_id=a),b&&(f.node_id=b),this.config.request({method:"GET",json:!0,url:this.config.endpoint+"/nodes",qs:f},e)},c.prototype.get=function(a,b,c,e){return d.trace("getting nodes"),a?b?void this.list(a,b,c,function(a,b,c){c&&c.length>0&&(c=c[0]),e(a,b,c)}):void e(new Error("node_id is missing")):void e(new Error("deployment_id is missing"))},b.exports=c},{log4js:15}],28:[function(a,b){"use strict";function c(a){this.config=a}var d=a("log4js").getLogger("cloudify.nodeInstances");c.prototype.run_query=function(a,b){d.trace("running query"),this.config.request({method:"POST",json:!0,url:this.config.endpoint+"/search",body:a},b)},b.exports=c},{log4js:15}]},{},[18]);